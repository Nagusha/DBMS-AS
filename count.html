<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Links Program with Countdown Timer</title>
</head>
<body>
    <h2> Introduction to manipulation</h2>

<div id="links-container">
    <!-- Links will be dynamically added here -->
</div>

<div id="click-stats-container">
    <!-- Click statistics will be displayed here -->
</div>

<script>
var linkClickStats = {};
var links = [];

// Function to create a link element
function createLink(text, url) {
    var link = document.createElement("a");
    link.textContent = text;
    link.href = url;
    link.style.display = "block"; // Display links vertically

    // Initialize click stats for this link
    linkClickStats[url] = {
        clicks: 0,
        totalTimeSpent: 0
    };

    // Add link to array
    links.push(link);

    return link;
}

// Function to update click statistics display
function updateClickStats() {
    var clickStatsContainer = document.getElementById("click-stats-container");
    clickStatsContainer.innerHTML = "<h2> Introdution to manipulation :</h2>";
    for (var url in linkClickStats) {
        if (linkClickStats.hasOwnProperty(url)) {
            var stats = linkClickStats[url];
            var linkStatsElement = document.createElement("div");
            linkStatsElement.textContent = "URL: " + url + ", Clicks: " + stats.clicks + ", Total Time Spent (seconds): " + stats.totalTimeSpent;
            clickStatsContainer.appendChild(linkStatsElement);
        }
    }
}

// Function to simulate circular routing of links
function circularRouting() {
    var index = 0;

    function nextLink() {
        var currentLink = links[index];
        var startTime = Date.now();
        var timeLimit = 10; // Time limit in seconds

        // Update countdown timer display
        var countdownTimer = document.createElement("div");
        countdownTimer.textContent = "Time left: " + timeLimit + "s";
        currentLink.parentNode.insertBefore(countdownTimer, currentLink.nextSibling);

        var timerInterval = setInterval(function() {
            var currentTime = Date.now();
            var elapsedTime = (currentTime - startTime) / 1000; // Calculate elapsed time in seconds
            var remainingTime = timeLimit - elapsedTime;
            countdownTimer.textContent = "Time left: " + Math.max(0, Math.round(remainingTime)) + "s";

            // Check if time limit has been reached
            if (elapsedTime >= timeLimit) {
                clearInterval(timerInterval);
                countdownTimer.textContent = "Time's up!";
                
                // Trigger some action here, for example:
                // currentLink.click(); // Simulate a click on the link
            }
        }, 1000);

        // Move to the next link
        index = (index + 1) % links.length;
    }

    nextLink();
}

// Create links
var boxLink = createLink("Box", "threebox.html");
var emailLink = createLink("Email", "email.html");
var classLink = createLink("Class", "basic.html"); // Placeholder link, replace "#" with actual URL or function

// Append links to the container
var linksContainer = document.getElementById("links-container");
linksContainer.appendChild(boxLink);
linksContainer.appendChild(emailLink);
linksContainer.appendChild(classLink);

// Initialize click statistics display
updateClickStats();

// Start circular routing
circularRouting();
</script>

</body>
</html>
